<h2>Predict results</h2>

<form *ngIf="{drivers: drivers | async} as data" [formGroup]="predictionForm" (ngSubmit)="submit()">
    <div class="prediction-form">
        <div *ngFor="let eventName of ['qualification', 'race']; let eventIndex = index; let isLast = last" class="event">
            <h3>{{eventName}}</h3>
            
            <ng-container *ngFor="let placeIndex of PLACE_INDEXES">
                <p>
                    <mat-form-field>
                        <mat-label>{{placeIndex + 1}}</mat-label>
                        
                        <mat-select 
                            [formControlName]="eventName + (placeIndex + 1)" 
                            [(value)]="selectedDriverFamilyNames[eventIndex][placeIndex]">
                            
                            <mat-select-trigger>
                                <img class="bolid" [src]="getBolidPath(selectedDriverFamilyNames[eventIndex][placeIndex])" />
                                <span>{{selectedDriverFamilyNames[eventIndex][placeIndex]}}</span>
                            </mat-select-trigger>
                            
                            <mat-option *ngFor="let driver of data.drivers" [value]="driver.familyName" >
                                <img class="bolid" [src]="getBolidPath(driver.familyName)" />
                                <span class="name">{{driver.familyName}}</span>
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </p>
            </ng-container>
        </div>
    </div>

    <div class="button-bar">
        <button mat-button color="primary" type="submit" [disabled]="!predictionForm.valid">Submit</button>
        <button mat-button color="primary" type="button" (click)="discard()">Discard</button>
    </div>
</form>
